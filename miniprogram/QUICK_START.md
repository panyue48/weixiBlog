# 快速启动指南

## 一、安装依赖

```bash
cd miniprogram
npm install
```

如果安装 uView UI 失败，可以手动安装：

```bash
npm install uview-ui@2.0.36
```

## 二、配置后端地址

编辑 `miniprogram/utils/request.js`，确认后端地址：

```javascript
const BASE_URL = 'http://localhost:8083/api'  // 确保与后端端口一致
```

## 三、启动后端服务

确保后端 Spring Boot 服务已启动（端口 8083）

## 四、启动前端

### 方式一：H5 预览（推荐）

```bash
npm run dev:h5
```

然后在浏览器访问：http://localhost:8080

**优点**：
- ✅ 快速预览，无需微信开发者工具
- ✅ 支持热更新
- ✅ 方便调试网络请求
- ✅ 自动处理微信登录（使用模拟登录）

### 方式二：微信小程序预览（使用微信开发者工具）

**详细步骤请查看：[微信开发者工具使用指南](WECHAT_DEV_TOOL.md)**

**快速步骤**：
1. 编译小程序代码：
   ```bash
   npm run dev:mp-weixin
   ```

2. 打开微信开发者工具：
   - 下载：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
   - 安装并启动

3. 导入项目：
   - 点击"新建项目"
   - 目录选择：`miniprogram/dist/dev/mp-weixin`
   - AppID选择"测试号"（或填写你的AppID）
   - 点击"确定"

4. 配置开发环境：
   - 点击"详情" → "本地设置"
   - 勾选"不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"

5. 开始预览和调试

## 五、测试功能

### 1. 测试登录
- 点击底部"我的"标签
- 点击"微信一键登录"
- H5环境会自动使用模拟登录
- 登录成功后返回首页

### 2. 测试发布博客
- 点击底部"写博客"标签
- 填写标题、选择分类、选择标签
- 输入内容（支持Markdown）
- 点击"发布博客"

### 3. 测试浏览博客
- 在首页查看博客列表
- 点击博客卡片查看详情
- 使用搜索框搜索博客
- 使用筛选栏按分类/标签筛选

### 4. 测试编辑/删除
- 在详情页，如果是自己的博客，会显示"编辑"和"删除"按钮
- 点击"编辑"可以修改博客
- 点击"删除"可以删除博客

## 常见问题排查

### 问题1：页面空白
**解决**：检查浏览器控制台，确认后端服务是否启动

### 问题2：网络请求失败
**解决**：
1. 确认后端服务运行在 8083 端口
2. 检查 `utils/request.js` 中的 BASE_URL
3. 确认后端已配置 CORS（已包含 CorsConfig.java）

### 问题3：uView 组件不显示
**解决**：
1. 确认已安装 uview-ui：`npm list uview-ui`
2. 确认 `main.js` 中已引入 uView
3. 确认 `pages.json` 中已配置 easycom

### 问题4：登录失败
**解决**：
- H5环境：会自动使用模拟登录，无需担心
- 小程序环境：需要配置真实的 AppID

## 开发建议

1. **优先使用 H5 预览**：开发阶段建议使用 `npm run dev:h5`
2. **查看控制台**：遇到问题先查看浏览器控制台的错误信息
3. **网络调试**：使用浏览器开发者工具的 Network 面板查看 API 请求
4. **定期测试**：重要功能开发完成后，在微信开发者工具中测试

## 下一步

- ✅ 基础功能已完成
- 🔄 可以优化 Markdown 渲染（当前使用简单正则）
- 🔄 可以集成图片上传功能
- 🔄 可以添加更多交互效果

